<!DOCTYPE html>
<html lang="es-ES" dir="ltr"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=4321&amp;path=livereload" data-no-instant defer></script>
  
                           
     


<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.136.5">
<title>An√°lisis de sentimiento usando modelos de lenguaje (LLM) locales en R | Blog</title>


<meta property="twitter:site" content="@bastimapache">
<meta property="twitter:creator" content="@bastimapache">







  
    
  
<meta name="description" content="Blog y portafolio de proyectos de Basti√°n Olea, soci√≥logx y analista de datos">


<meta property="og:site_name" content="Blog">
<meta property="og:title" content="An√°lisis de sentimiento usando modelos de lenguaje (LLM) locales en R | Blog">
<meta property="og:description" content="Blog y portafolio de proyectos de Basti√°n Olea, soci√≥logx y analista de datos" />
<meta property="og:type" content="page" />
<meta property="og:url" content="http://localhost:4321/blog/analisis_sentimiento_llm/" />
<meta property="og:locale" content="es-ES">




    
        <meta property="og:image" content="http://localhost:4321/blog/sidebar-listing.png" >
        <meta property="twitter:card" content="summary_large_image">
        <meta name="twitter:image" content="http://localhost:4321/blog/sidebar-listing.png" >
    
    
  
  <meta itemprop="name" content="An√°lisis de sentimiento usando modelos de lenguaje (LLM) locales en R">
  <meta itemprop="description" content="El an√°lisis de sentimientos es una t√©cnica de an√°lisis de texto donde se aplican distintos algoritmos para poder clasificar textos de distinta longitud y complejidad en un conjunto preestablecido de categor√≠as relacionadas al sentimiento de dichos textos. Con el sentimiento de los textos nos referimos a la informaci√≥n subjetiva que entregan estos textos, as√≠ como los afectos que producen. Por ejemplo, ‚Äúodio a mi gato‚Äù versus ‚Äúmi gatita es tan tierna‚Äù son dos textos que expresan distintos niveles de negatividad/positividad, agresividad, ternura, etc√©tera. Las categor√≠as del an√°lisis del sentimiento suelen ser positivo, neutro y negativo, u otras m√°s complejas, como agrado (agradable/desagradable), activaci√≥n (activo/pasivo), entre otros.">
  <meta itemprop="datePublished" content="2024-12-22T00:00:00+00:00">
  <meta itemprop="dateModified" content="2024-12-22T00:00:00+00:00">
  <meta itemprop="wordCount" content="1862">
  <meta itemprop="keywords" content="An√°lisis de texto,Inteligencia artificial">
  
  <!--[if IE]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/img/favicon.ico" type="image/x-icon">
  
  
  <link rel="stylesheet" href="/style.main.min.c4fbf76e54adf7e7a1073b995dfaf4f393e11c67c30cfd5b19d29824f2cee0f0.css" integrity="sha256-xPv3blSt9&#43;ehBzuZXfr085PhHGfDDP1bGdKYJPLO4PA=" media="screen">
  
  
  <script src="/panelset.min.ed1ac24b6e16f4e2481e3d1d098ae66f5bc77438aef619e6e266d8ac5b00dc72.js" type="text/javascript"></script>
  
  
  <script src="/main.min.26a7606c1bee1310cdae7196cfade9ba0a2a95bff0c4f9cc2156609ec0d0326a.js" type="text/javascript"></script>
</head>
<body>
      <div class="grid-container">
<header class="site-header pt4 pb2 mb4 bb b--transparent ph5 headroom z-max" role="banner">
  <nav class="site-nav db dt-l w-100" role="navigation">
    <a class="site-brand db dtc-l v-mid link no-underline w-100 w-33-l tc tl-l" href="http://localhost:4321/" title="Home">
      <img src="/img/logo.png" class="dib db-l h2 w-auto" alt="Blog">
    </a>
    <div class="site-links db dtc-l v-mid w-100 w-47-l tc tr-l mt3 mt0-l ttu tracked">
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 active" href="/blog/" title="Basti√°n Olea: Blog de R">Blog R</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/apps/" title="Basti√°n Olea: Apps">Apps</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/clases/" title="Basti√°n Olea: Clases">Clases</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/tags/" title="Basti√°n Olea: Blog">Temas</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/categories/tutoriales/" title="Basti√°n Olea: Tutoriales">Tutoriales</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/blog/r_introduccion/" title="Basti√°n Olea: Tutoriales">Intro a R</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/about/" title="Basti√°n Olea: Sobre mi">Yo</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/contact/" title="Basti√°n Olea: Contacto">Contacto</a>
      
      
      
      <div class="dib v-mid", style = "padding: 4px; margin-top: 4px;">
        <div class="social-icon-links" aria-hidden="true">
  
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://github.com/bastianolea" title="github" target="_blank" rel="me noopener">
      <i class="fab fa-github fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://bsky.app/profile/bastianolea.rbind.io" title="bluesky" target="_blank" rel="me noopener">
      <i class="fab fa-bluesky fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://x.com/bastimapache" title="twitter" target="_blank" rel="me noopener">
      <i class="fab fa-twitter fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://www.linkedin.com/in/bastianolea/" title="linkedin" target="_blank" rel="me noopener">
      <i class="fab fa-linkedin fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://www.tiktok.com/@bastimapache" title="tiktok" target="_blank" rel="me noopener">
      <i class="fab fa-tiktok fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://www.instagram.com/raccunnie" title="instagram" target="_blank" rel="me noopener">
      <i class="fab fa-instagram fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://www.goodreads.com/user/show/53224910-basti-n-olea-herrera" title="goodreads" target="_blank" rel="me noopener">
      <i class="fab fa-goodreads fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="/contact/" title="envelope" >
      <i class="fas fa-envelope fa-lg fa-fw"></i>
    </a>
  
</div>

      </div>
      
    </div>
  </nav>
</header>

<main class="page-main pa4" role="main">
  <section class="page-content mw7 center">
    <article class="post-content pa0 ph4-l">
      <header class="post-header">
        <h1 class="f1 lh-solid measure-narrow mb3 fw4">An√°lisis de sentimiento usando modelos de lenguaje (LLM) locales en R</h1>
        
        
        <p class="f7 db mv0 ttu">22/12/2024</p>
        
        
        
  <dl class="f6 lh-copy">
    <em><dd class="fw5 ml0">Temas:  <a href="http://localhost:4321/tags/an%C3%A1lisis-de-texto">an√°lisis de texto</a>  <a href="http://localhost:4321/tags/inteligencia-artificial">inteligencia artificial</a> </dd></em>
  </dl>


        
      

      </header>
      <section class="post-body pt5 pb4">
        <p>El an√°lisis de sentimientos es una t√©cnica de an√°lisis de texto donde se aplican distintos algoritmos para poder clasificar textos de distinta longitud y complejidad en un conjunto preestablecido de categor√≠as relacionadas al sentimiento de dichos textos. Con el <em>sentimiento</em> de los textos nos referimos a la informaci√≥n subjetiva que entregan estos textos, as√≠ como los afectos que producen. Por ejemplo, &ldquo;odio a mi gato&rdquo; versus &ldquo;mi gatita es tan tierna&rdquo; son dos textos que expresan distintos niveles de negatividad/positividad, agresividad, ternura, etc√©tera. Las categor√≠as del an√°lisis del sentimiento suelen ser <em>positivo, neutro</em> y <em>negativo,</em> u otras m√°s complejas, como agrado (agradable/desagradable), activaci√≥n (activo/pasivo), entre otros.</p>
<p>En otras palabras, la aplicaci√≥n de un an√°lisis de sentimiento a un conjunto de textos nos permitir√≠a clasificar estos textos en categor√≠as como positivo, neutro y negativo, en base a la forma en que describen el tema del que tratan, o bien, cualidades de las palabras que se usen dentro del texto.</p>
<p>El an√°lisis de sentimiento usualmente es un medio para poder contar con nueva informaci√≥n que nos permita desarrollar nuevos an√°lisis. En este sentido, la nueva variable de sentimiento resulta √∫til de ser cruzada con otras variables acerca del texto, tales como variables que identifiquen la autor√≠a del texto, su fuente, quien enuncia el texto, de qu√© trata el texto, etc.</p>
<p>Algunos usos del an√°lisis de sentimiento son:</p>
<ul>
<li>Evaluar si los textos dentro de un conjunto de textos o <em>corpus</em> son positivos o negativos,</li>
<li>Correlacionar si los textos de distintos autores difieren en sus sentimientos,</li>
<li>Analizar si textos sobre determinadas tem√°ticas se correlacionan con sentimientos espec√≠ficos,</li>
<li>Estudiar si ciertos temas son tratados de una forma espec√≠fica por ciertos autores, y de una forma distinta por otros</li>
<li>Comparar si textos sobre un mismo tema son expuestos de forma distinta por distintos autores o fuentes</li>
</ul>
<p>Pensemos en el ejemplo de un conjunto de art√≠culos de prensa o noticias, cada uno con fecha y el medio de comunicaci√≥n del que proviene. Si hacemos una selecci√≥n de noticias sobre un tema espec√≠fico, podr√≠amos analizar c√≥mo cambia el sentimiento dominante con el que se plantea la tem√°tica en distintos momentos del tiempo, o si dos medios de comunicaci√≥n representan una misma tem√°tica bajo distinto sentimiento.</p>
<div class="highlight"><pre tabindex="0" style="color:#e0def4;background-color:#232136;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#ea9a97">library</span><span style="color:#908caa">(</span><span style="color:#ea9a97">dplyr</span><span style="color:#908caa">)</span>
</span></span><span style="display:flex;"><span><span style="color:#ea9a97">library</span><span style="color:#908caa">(</span><span style="color:#ea9a97">readr</span><span style="color:#908caa">)</span>
</span></span></code></pre></div><p>Probemos haciendo un an√°lisis de sentimiento a partir de un corpus de textos de noticias chilenas publicadas el a√±o 2024. Los datos son obtenidos de 
<a href="https://github.com/bastianolea/prensa_chile" target="_blank" rel="noopener">este repositorio de obtenci√≥n automatizada de textos de noticias de prensa escrita chilena.</a></p>
<div class="highlight"><pre tabindex="0" style="color:#e0def4;background-color:#232136;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#6e6a86"># direcci√≥n web donde se encuentran los datos</span>
</span></span><span style="display:flex;"><span><span style="color:#ea9a97">url_datos</span> <span style="color:#908caa">&lt;-</span> <span style="color:#f6c177">&#34;https://raw.githubusercontent.com/bastianolea/prensa_chile/refs/heads/main/datos/prensa_datos_muestra.csv&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6e6a86"># lectura de los datos ubicados en internet</span>
</span></span><span style="display:flex;"><span><span style="color:#ea9a97">noticias</span> <span style="color:#908caa">&lt;-</span> <span style="color:#ea9a97">read_csv2</span><span style="color:#908caa">(</span><span style="color:#ea9a97">url_datos</span><span style="color:#908caa">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6e6a86"># extracci√≥n de una marcha aleatoria de 20 noticias</span>
</span></span><span style="display:flex;"><span><span style="color:#ea9a97">noticias_muestra</span> <span style="color:#908caa">&lt;-</span> <span style="color:#ea9a97">noticias</span> <span style="color:#908caa">|&gt;</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#ea9a97">slice_sample</span><span style="color:#908caa">(</span><span style="color:#ea9a97">n</span> <span style="color:#908caa">=</span> <span style="color:#f6c177">20</span><span style="color:#908caa">)</span>
</span></span></code></pre></div><p>En el c√≥digo anterior, identificamos la ubicaci√≥n de los datos que usaremos de prueba, que corresponden a un conjunto de 3000 noticias p√∫blicas del a√±o 2024, y cargamos los datos directamente desde internet. Como se trata de una prueba, reduciremos la cantidad de noticias a tan s√≥lo 20:</p>
<div class="highlight"><pre tabindex="0" style="color:#e0def4;background-color:#232136;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#ea9a97">noticias_muestra</span>
</span></span></code></pre></div><pre><code># A tibble: 20 √ó 4
   titulo                                               cuerpo fuente fecha     
   &lt;chr&gt;                                                &lt;chr&gt;  &lt;chr&gt;  &lt;date&gt;    
 1 &quot;Sismo de 7,3 de magnitud con epicentro en San Pedr‚Ä¶ &quot;El m‚Ä¶ La Na‚Ä¶ 2024-07-18
 2 &quot;Mirar, inclinar y tocar: Las recomendaciones del B‚Ä¶ &quot;Aton‚Ä¶ Emol   2024-09-13
 3 &quot;Fr√≠o y lluvia en la zona central: El pron√≥stico de‚Ä¶ &quot;El p‚Ä¶ Megan‚Ä¶ 2024-04-26
 4 &quot;Comisi√≥n de Miner√≠a y Energ√≠a de la C√°mara aprueba‚Ä¶ &quot;De m‚Ä¶ D. Fi‚Ä¶ 2024-11-06
 5 &quot;Nuevo l√≠der de Salesforce Chile entrega detalles d‚Ä¶ &quot;En f‚Ä¶ D. Fi‚Ä¶ 2024-09-30
 6 &quot;Carabineros incauta 84 m√°quinas de azar y detiene ‚Ä¶ &quot;Los ‚Ä¶ La Na‚Ä¶ 2024-04-05
 7 &quot;Este martes se estrena la nueva temporada de Indec‚Ä¶ &quot;Este‚Ä¶ Megan‚Ä¶ 2024-08-13
 8 &quot;Trabajo activa subsidio al empleo en zonas afectad‚Ä¶ &quot;El s‚Ä¶ D. Fi‚Ä¶ 2024-02-20
 9 &quot;Jos√© Pi√±era aparece en misa f√∫nebre de su hermano ‚Ä¶ &quot;El e‚Ä¶ Megan‚Ä¶ 2024-02-09
10 &quot;Hombre de 41 a√±os es asesinado en Vi√±a: fue atacad‚Ä¶ &quot;El p‚Ä¶ La Na‚Ä¶ 2024-09-17
11 &quot;Canto de ballenas jorobadas enviada al espacio ins‚Ä¶ &quot;Desd‚Ä¶ El De‚Ä¶ 2024-05-06
12 &quot;Juan Pablo Hermosilla adelanta que entregar√° chats‚Ä¶ &quot;Juan‚Ä¶ El D√≠‚Ä¶ 2024-10-23
13 &quot;Eclipse Solar 2024: revisa la fecha y ciudades de ‚Ä¶ &quot;El m‚Ä¶ El Mo‚Ä¶ 2024-10-01
14 &quot;Lluvia en Santiago: ¬øHasta cu√°ndo precipitar√° inte‚Ä¶ &quot;En l‚Ä¶ Megan‚Ä¶ 2024-06-21
15 &quot;OLCA y alza de la luz: ‚ÄúEl sistema energ√©tico est√°‚Ä¶ &quot;En u‚Ä¶ El Ci‚Ä¶ 2024-07-06
16 &quot;Caso P√≠o Nono: fiscal√≠a busca evitar ir a juicio t‚Ä¶ &quot;Qu√© ‚Ä¶ Ex-An‚Ä¶ 2024-01-24
17 &quot;‚ÄúLe minti√≥ a Chile‚Äù: Diputado Guzm√°n present√≥ ante‚Ä¶ &quot;El d‚Ä¶ CNN C‚Ä¶ 2024-11-18
18 &quot;PDI confirma detenci√≥n de \&quot;Perro Elvis\&quot; por pres‚Ä¶ &quot;Dura‚Ä¶ 24 Ho‚Ä¶ 2024-08-31
19 &quot;Otra de Maduro: El controvertido mandatario boliva‚Ä¶ &quot;Vene‚Ä¶ Publi‚Ä¶ 2024-08-09
20 &quot;‚ÄúHa sido un d√≠a dif√≠cil‚Äù: ministra Toh√° confirma q‚Ä¶ &quot;‚ÄúHa ‚Ä¶ Publi‚Ä¶ 2024-10-17
</code></pre>
<p>Los datos tienen una columna con el t√≠tulo, otra con el cuerpo de la noticia, y finalmente la fuente de la noticia y su fecha de publicaci√≥n.</p>




<h2 id="configuraci√≥n-del-modelo-de-lenguaje-local">Configuraci√≥n del modelo de lenguaje local
  <a href="#configuraci%c3%b3n-del-modelo-de-lenguaje-local"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h2>
<p>Para poder usar modelos LLM localmente con R, 
<a href="https://ollama.com/" target="_blank" rel="noopener">tenemos que instalar Ollama</a> en nuestro equipo, que es la aplicaci√≥n que nos permite obtener y usar modelos de lenguaje locales, y ejecutar la aplicaci√≥n en nuestro computador. Ollama tiene que estar abierto para poder proveer del modelo a nuestra sesi√≥n de R.</p>
<p>Luego, ya sea desde Ollama o desde R, tenemos que instalar un modelo de lenguaje. Desde R, es tan simple como ejecutar: <code>ollamar::pull(&quot;llama3.2:1b&quot;)</code>, definiendo el 
<a href="https://ollama.com/search" target="_blank" rel="noopener">modelo</a> que queremos instalar. Al elegir un modelo, debes considerar las capacidades de tu computador para ejecutar los modelos, y que el tama√±o del modelo es directamente proporcional con la calidad de sus respuestas<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>.</p>
<p>Una vez tengas Ollama abierto en tu computador, y un modelo previamente instalado, puedes proceder a usarlo en R en el siguiente paso.</p>




<h2 id="extracci√≥n-de-sentimiento-a-partir-del-texto">Extracci√≥n de sentimiento a partir del texto
  <a href="#extracci%c3%b3n-de-sentimiento-a-partir-del-texto"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h2>
<p>Para realizar el an√°lisis de sentimiento, utilizaremos la ayuda de un modelo de lenguaje de gran tama√±o (LLM), los cuales est√°n entrenados para este tipo de tareas. Cargamos 
<a href="https://mlverse.github.io/mall/#get-started" target="_blank" rel="noopener">el paquete {mall} para uso de LLMs en R</a>, y {beepr} para anunciar con una campanita cuando se termine el procesamiento, porque puede tardar unos minutos.</p>
<div class="highlight"><pre tabindex="0" style="color:#e0def4;background-color:#232136;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#ea9a97">library</span><span style="color:#908caa">(</span><span style="color:#ea9a97">mall</span><span style="color:#908caa">)</span>
</span></span><span style="display:flex;"><span><span style="color:#ea9a97">library</span><span style="color:#908caa">(</span><span style="color:#ea9a97">beepr</span><span style="color:#908caa">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6e6a86"># ollamar::pull(&#34;llama3.1:8b&#34;) # instalar modelo</span>
</span></span><span style="display:flex;"><span><span style="color:#ea9a97">llm_use</span><span style="color:#908caa">(</span><span style="color:#f6c177">&#34;ollama&#34;</span><span style="color:#908caa">,</span> <span style="color:#f6c177">&#34;llama3.1:8b&#34;</span><span style="color:#908caa">)</span> <span style="color:#6e6a86"># cargar modelo</span>
</span></span></code></pre></div><p>La 
<a href="https://mlverse.github.io/mall/#sentiment" target="_blank" rel="noopener">funci√≥n <code>llm_sentiment()</code> del paquete {mall}</a> facilita la extracci√≥n del sentimiento a partir del texto. Tan s√≥lo es necesario indicar la columna que contiene el texto, y las categor√≠as de sentimiento que deseamos obtener. Por medio del siguiente c√≥digo, se alimenta al modelo de lenguaje con cada uno de los textos, y se le pide obtener como respuesta si el texto es positivo, neutro o negativo.</p>
<div class="highlight"><pre tabindex="0" style="color:#e0def4;background-color:#232136;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#ea9a97">noticias_sentimiento</span> <span style="color:#908caa">&lt;-</span> <span style="color:#ea9a97">noticias_muestra</span> <span style="color:#908caa">|&gt;</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#ea9a97">llm_sentiment</span><span style="color:#908caa">(</span><span style="color:#ea9a97">cuerpo</span><span style="color:#908caa">,</span> 
</span></span><span style="display:flex;"><span>                <span style="color:#ea9a97">pred_name</span> <span style="color:#908caa">=</span> <span style="color:#f6c177">&#34;sentimiento&#34;</span><span style="color:#908caa">,</span>
</span></span><span style="display:flex;"><span>                <span style="color:#ea9a97">options</span> <span style="color:#908caa">=</span> <span style="color:#ea9a97">c</span><span style="color:#908caa">(</span><span style="color:#f6c177">&#34;positivo&#34;</span><span style="color:#908caa">,</span> <span style="color:#f6c177">&#34;neutro&#34;</span><span style="color:#908caa">,</span> <span style="color:#f6c177">&#34;negativo&#34;</span><span style="color:#908caa">))</span>
</span></span><span style="display:flex;"><span><span style="color:#ea9a97">beep</span><span style="color:#908caa">()</span>
</span></span></code></pre></div><p>En mi computador personal, este proceso en total tom√≥ 88 segundos, lo que significa que tarda aproximadamente cuatro segundos por cada texto que el modelo analiza y clasifica. Esto depende de las capacidades gr√°ficas de tu computador, y del largo del texto. Las noticias suelen tener como m√≠nimo varios cientos de palabras, lo que hace que el proceso sean un poco m√°s lento.</p>
<p>A continuaci√≥n, vemos los resultados del an√°lisis de sentimiento:</p>
<div class="highlight"><pre tabindex="0" style="color:#e0def4;background-color:#232136;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#ea9a97">noticias_sentimiento</span> <span style="color:#908caa">|&gt;</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#ea9a97">select</span><span style="color:#908caa">(</span><span style="color:#ea9a97">sentimiento</span><span style="color:#908caa">,</span> <span style="color:#ea9a97">titulo</span><span style="color:#908caa">)</span>
</span></span></code></pre></div><pre><code># A tibble: 20 √ó 2
   sentimiento titulo                                                           
   &lt;chr&gt;       &lt;chr&gt;                                                            
 1 neutro      &quot;Sismo de 7,3 de magnitud con epicentro en San Pedro de Atacama ‚Ä¶
 2 positivo    &quot;Mirar, inclinar y tocar: Las recomendaciones del Banco Central ‚Ä¶
 3 negativo    &quot;Fr√≠o y lluvia en la zona central: El pron√≥stico de Alejandro Se‚Ä¶
 4 positivo    &quot;Comisi√≥n de Miner√≠a y Energ√≠a de la C√°mara aprueba en particula‚Ä¶
 5 positivo    &quot;Nuevo l√≠der de Salesforce Chile entrega detalles de los s√∫per a‚Ä¶
 6 negativo    &quot;Carabineros incauta 84 m√°quinas de azar y detiene a 3 personas ‚Ä¶
 7 positivo    &quot;Este martes se estrena la nueva temporada de Indecisos: Candida‚Ä¶
 8 positivo    &quot;Trabajo activa subsidio al empleo en zonas afectadas por los in‚Ä¶
 9 negativo    &quot;Jos√© Pi√±era aparece en misa f√∫nebre de su hermano Sebasti√°n: Le‚Ä¶
10 negativo    &quot;Hombre de 41 a√±os es asesinado en Vi√±a: fue atacado con ‚Äúun obj‚Ä¶
11 positivo    &quot;Canto de ballenas jorobadas enviada al espacio inspira obra de ‚Ä¶
12 positivo    &quot;Juan Pablo Hermosilla adelanta que entregar√° chats de su herman‚Ä¶
13 positivo    &quot;Eclipse Solar 2024: revisa la fecha y ciudades de Chile en las ‚Ä¶
14 negativo    &quot;Lluvia en Santiago: ¬øHasta cu√°ndo precipitar√° intensamente en l‚Ä¶
15 negativo    &quot;OLCA y alza de la luz: ‚ÄúEl sistema energ√©tico est√° centrado en ‚Ä¶
16 negativo    &quot;Caso P√≠o Nono: fiscal√≠a busca evitar ir a juicio tras rev√©s par‚Ä¶
17 negativo    &quot;‚ÄúLe minti√≥ a Chile‚Äù: Diputado Guzm√°n present√≥ antecedentes a Co‚Ä¶
18 negativo    &quot;PDI confirma detenci√≥n de \&quot;Perro Elvis\&quot; por presunta responsa‚Ä¶
19 negativo    &quot;Otra de Maduro: El controvertido mandatario bolivariano ordena ‚Ä¶
20 negativo    &quot;‚ÄúHa sido un d√≠a dif√≠cil‚Äù: ministra Toh√° confirma que Presidente‚Ä¶
</code></pre>
<div class="highlight"><pre tabindex="0" style="color:#e0def4;background-color:#232136;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-r" data-lang="r"><span style="display:flex;"><span><span style="color:#ea9a97">noticias_sentimiento</span> <span style="color:#908caa">|&gt;</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#ea9a97">select</span><span style="color:#908caa">(</span><span style="color:#ea9a97">sentimiento</span><span style="color:#908caa">)</span> <span style="color:#908caa">|&gt;</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#ea9a97">table</span><span style="color:#908caa">()</span>
</span></span></code></pre></div><pre><code>sentimiento
negativo   neutro positivo 
      11        1        8 
</code></pre>




<h3 id="conclusi√≥n">Conclusi√≥n
  <a href="#conclusi%c3%b3n"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h3>
<p>Revisando los resultados a la r√°pida, vemos que una noticia sobre un sismo es aparentemente <strong>neutra</strong>, probablemente por la forma en que est√© redactada. Noticias sobre la aprobaci√≥n de un proyecto de ley, la presentaci√≥n de nuevas tecnolog√≠as, o beneficios para personas afectadas por incendios, son interpretadas como <strong>positivas</strong>. Por √∫ltimo, noticias sobre frentes de mal tiempo, operaciones policiales, funerales, cr√≠menes y asesinatos son interpretadas como <strong>negativas</strong>. Tambi√©n, vemos que una noticia donde una ministra interpreta una jornada como dif√≠cil tambi√©n es negativa, y otra donde se critica al mandatario de un pa√≠s por sus actos tambi√©n.</p>
<p>En este sentido, el desempe√±o de aplicar el modelo de lenguaje para obtener el sentimiento de los textos parece satisfactorio. De forma automatizada, y sin intervenci√≥n ni supervisi√≥n humana, hemos obtenido valiosa informaci√≥n que resume un aspecto del significado codificado en los textos.</p>
<p>A partir de esta nueva variable, podemos proceder, por ejemplo, a detectar noticias que contienen ciertos conceptos, y analizar si dicha tem√°tica se trata mayormente de forma positiva o negativa. O si est√° positividad o negatividad var√≠a a trav√©s de las distintas fuentes de informaci√≥n, momentos en el tiempo, u otras particularidades del texto.</p>




<h3 id="consideraciones">Consideraciones
  <a href="#consideraciones"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h3>
<p>Los resultados siempre van a depender de la calidad de los datos que alimentes al modelo. Tambi√©n es necesario considerar que, debido a que los modelos de lenguaje no son deterministas, los resultados siempre pueden variar. En otras palabras, si analiza el sentimiento de un mismo texto m√∫ltiples veces, puede que los resultados sean levemente distintos. Teniendo esto en consideraci√≥n, es importante ser cr√≠ticos al momento de recibir resultados de un modelo de lenguaje o de cualquier otra herramienta de inteligencia artificial, y tambi√©n considerar estos resultados como convenientes intentos de aproximaci√≥n a la realidad: por un lado, los modelos de lenguaje facilitan muchas tareas, pero por otro, nunca podemos fiarnos 100% de sus resultados, sobre todo cuando estamos tratando con tem√°ticas complejas como son el significado expresado por textos que reflejan facetas complejas de la realidad social y pol√≠tica.</p>
<hr>
<p>Si este tutorial te sirvi√≥, por favor considera hacerme una peque√±a donaci√≥n para poder tomarme un cafecito mientras escribo el siguiente tutorial ü•∫</p>
<div style = "height: 18px;">
</div>
<div>
  <div style="display: flex;
  justify-content: center;
  align-items: center;">
    <script type="text/javascript" src="https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js" data-name="bmc-button" data-slug="bastimapache" data-color="#FFDD00" data-emoji="‚òï"  data-font="Cookie" data-text="Reg√°lame un cafecito" data-outline-color="#000000" data-font-color="#000000" data-coffee-color="#ffffff" ></script>
  </div>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>Si tu computador es muy b√°sico (tiene poca memoria RAM), recomiendo instalar Llama 3.2 1B. Si tiene al menos 8GB de memoria, recomiendo Llama 3.2 3B. Si tienes suficiente memoria (m√°s de 8GB), recomiendo Llama 3.1 8B.&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>

        
        <details closed class="f6 fw7 input-reset">
  <dl class="f6 lh-copy">
    <dt class="fw7">Fecha de publicaci√≥n:</dt>
    <dd class="fw5 ml0">December 22, 2024</dd>
  </dl>
  <dl class="f6 lh-copy">
    <dt class="fw7">Extensi√≥n:</dt>
    <dd class="fw5 ml0">9 minute read, 1862 words</dd>
  </dl>
  
  <dl class="f6 lh-copy">
    <dt class="fw7">Categor√≠as:</dt>
    <dd class="fw5 ml0"> <a href="http://localhost:4321/categories/tutoriales">tutoriales</a> </dd>
  </dl>
  
  
  
  <dl class="f6 lh-copy">
    <dt class="fw7">Tags:</dt>
    <dd class="fw5 ml0"> <a href="http://localhost:4321/tags/an%C3%A1lisis-de-texto">an√°lisis de texto</a>  <a href="http://localhost:4321/tags/inteligencia-artificial">inteligencia artificial</a> </dd>
  </dl>
  
  <dl class="f6 lh-copy">
    <dt class="fw7">Ver tambi√©n:</dt>
    
    <dd class="fw5 ml0"><a href="/blog/2024-12-20/">Procesando datos de texto en masa usando modelos de lenguaje (LLM)</a></dd>
    
    <dd class="fw5 ml0"><a href="/blog/pal_asistentes_llm/">Crea tu propio asistente de programaci√≥n en R con inteligencia artificial usando el paquete {pal}</a></dd>
    
    <dd class="fw5 ml0"><a href="/blog/resumir_texto_llm/">Resumir textos usando modelos de lenguaje (LLM) locales en R</a></dd>
    
  </dl>
</details>

      </section>
      <footer class="post-footer">
        <div class="post-pagination dt w-100 mt4 mb2">
  
  
  
  
    <a class="next dtc pl2 tr v-top fw6"
    href="http://localhost:4321/blog/2024-12-21/">Novedades: app de temperaturas extremas, actualizaciones de otras apps &rarr;</a>
  
</div>

      </footer>
    </article>
    
      <div class="post-comments pa0 pa4-l mt4">
  
    
      <script src="https://utteranc.es/client.js"
              repo="bastianolea/blog-bastianolea-r"
              issue-term="pathname"
              theme="github-light"
              label="comments"
              crossorigin="anonymous"
              async
              type="text/javascript">
      </script>
    
  
</div>

    
  </section>
</main>
<footer class="site-footer pv4 bt b--transparent ph5" role="contentinfo">
  <nav class="db dt-l w-100">
    <p class="site-copyright f7 db dtc-l v-mid w-100 w-33-l tc tl-l pv2 pv0-l mv0 lh-copy">
      &copy; 2024 Basti√°n Olea Herrera, Chile
      <span class="middot-divider"></span>
      Hecho con <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title"><a xmlns:dct="http://purl.org/dc/terms/" href="https://github.com/hugo-apero/" rel="dct:source">Hugo Ap√©ro</a></span>.
      <br />
      
Basado en <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title"><a xmlns:dct="http://purl.org/dc/terms/" href="https://github.com/formspree/blogophonic-hugo" rel="dct:source">Blogophonic</a></span>, de <a xmlns:cc="http://creativecommons.org/ns#" href="https://formspree.io" property="cc:attributionName" rel="cc:attributionURL">Formspree</a>.
    </p>
    
    <div class="site-social-links db dtc-l v-mid w-100 w-33-l tc pv2 pv0-l mv0">
      <div class="social-icon-links" aria-hidden="true">
  
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://github.com/bastianolea" title="github" target="_blank" rel="me noopener">
      <i class="fab fa-github fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://bsky.app/profile/bastianolea.rbind.io" title="bluesky" target="_blank" rel="me noopener">
      <i class="fab fa-bluesky fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://x.com/bastimapache" title="twitter" target="_blank" rel="me noopener">
      <i class="fab fa-twitter fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://www.linkedin.com/in/bastianolea/" title="linkedin" target="_blank" rel="me noopener">
      <i class="fab fa-linkedin fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://www.tiktok.com/@bastimapache" title="tiktok" target="_blank" rel="me noopener">
      <i class="fab fa-tiktok fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://www.instagram.com/raccunnie" title="instagram" target="_blank" rel="me noopener">
      <i class="fab fa-instagram fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://www.goodreads.com/user/show/53224910-basti-n-olea-herrera" title="goodreads" target="_blank" rel="me noopener">
      <i class="fab fa-goodreads fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="/contact/" title="envelope" >
      <i class="fas fa-envelope fa-lg fa-fw"></i>
    </a>
  
</div>

    </div>
    
    <div class="site-links f6 db dtc-l v-mid w-100 w-67-l tc tr-l pv2 pv0-l mv0">
      
      <a class="dib pv1 ph2 link" href="/about/" title="Basti√°n Olea: Sobre mi">Sobre mi</a>
      
      <a class="dib pv1 ph2 link" href="/contact/" title="Basti√°n Olea: Contacto">Contacto</a>
      
      <a class="dib pv1 ph2 link" href="/license/" title="Basti√°n Olea: Licencia">Licencia</a>
      
    </div>
  </nav>
  
    <script>

    var i, text, code, codes = document.getElementsByTagName('code');
    for (let i = 0; i < codes.length;) {
      code = codes[i];
      if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
        text = code.textContent;
        if (/^\$[^$]/.test(text) && /[^$]\$$/.test(text)) {
          text = text.replace(/^\$/, '\\(').replace(/\$$/, '\\)');
          code.textContent = text;
        }
        if (/^\\\((.|\s)+\\\)$/.test(text) ||
            /^\\\[(.|\s)+\\\]$/.test(text) ||
            /^\$(.|\s)+\$$/.test(text) ||
            /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
          code.outerHTML = code.innerHTML;  
          continue;
        }
      }
      i++;
    }
</script>

  
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" integrity="sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js" integrity="sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js" integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>



    
  
  
</footer>

      </div>
    </body>
</html>
